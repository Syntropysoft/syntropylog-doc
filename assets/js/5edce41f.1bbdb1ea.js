"use strict";(self.webpackChunkdocs_docusaurus=self.webpackChunkdocs_docusaurus||[]).push([[428],{8015:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"api-reference/boilerplate","title":"Boilerplate - Critical API Reference","description":"\u26a0\ufe0f CRITICAL: This boilerplate is MANDATORY for ALL applications (development and production). Without it, your application may lose logs and crash unexpectedly when stopped.","source":"@site/docs/api-reference/boilerplate.md","sourceDirName":"api-reference","slug":"/api-reference/boilerplate","permalink":"/syntropylog-doc/docs/api-reference/boilerplate","draft":false,"unlisted":false,"editUrl":"https://github.com/Syntropysoft/SyntropyLog/tree/main/docs-docusaurus/docs/api-reference/boilerplate.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"API Reference","permalink":"/syntropylog-doc/docs/api-reference/"},"next":{"title":"Configuration","permalink":"/syntropylog-doc/docs/configuration/"}}');var r=i(4848),t=i(8453);const l={},s="Boilerplate - Critical API Reference",a={},c=[{value:"\ud83d\udea8 Why This Boilerplate is Essential",id:"-why-this-boilerplate-is-essential",level:2},{value:"\ud83d\udd27 Required Boilerplate API",id:"-required-boilerplate-api",level:2},{value:"\ud83c\udfaf API Functions",id:"-api-functions",level:2},{value:"<code>initializeSyntropyLog(): Promise&lt;void&gt;</code>",id:"initializesyntropylog-promisevoid",level:3},{value:"<code>gracefulShutdown(): Promise&lt;void&gt;</code>",id:"gracefulshutdown-promisevoid",level:3},{value:"\ud83d\ude80 Usage in Your Application",id:"-usage-in-your-application",level:2},{value:"\u26a0\ufe0f Application Checklist",id:"\ufe0f-application-checklist",level:2},{value:"\ud83d\udd0d Testing the Boilerplate",id:"-testing-the-boilerplate",level:2},{value:"\ud83d\udcda Related Examples",id:"-related-examples",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"boilerplate---critical-api-reference",children:"Boilerplate - Critical API Reference"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,r.jsx)(n.strong,{children:"CRITICAL"}),": This boilerplate is ",(0,r.jsx)(n.strong,{children:"MANDATORY"})," for ALL applications (development and production). Without it, your application may lose logs and crash unexpectedly when stopped."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-why-this-boilerplate-is-essential",children:"\ud83d\udea8 Why This Boilerplate is Essential"}),"\n",(0,r.jsx)(n.p,{children:"When your application is stopped (either by Ctrl+C in development or SIGTERM in production), it needs time to shut down gracefully. Without proper shutdown handling:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lost logs"}),": Logs in the queue may never be flushed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Corrupted data"}),": Incomplete operations may leave data in an inconsistent state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource leaks"}),": Connections to Redis, brokers, and databases may not be closed properly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Application crashes"}),": May be forcefully killed, causing data loss"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-required-boilerplate-api",children:"\ud83d\udd27 Required Boilerplate API"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Every application MUST include this boilerplate:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// =================================================================\n//  boilerplate.ts - Standard initialization and shutdown\n//  RESPONSIBILITY: Provide reusable boilerplate for SyntropyLog\n// =================================================================\n\nimport { syntropyLog } from 'syntropylog';\nimport { syntropyConfig } from './config';\n\nexport async function initializeSyntropyLog(): Promise<void> {\n  console.log('\ud83d\ude80 Initializing SyntropyLog...');\n  \n  try {\n    // \u2705 Using configuration from config.ts - simple async/await pattern\n    await syntropyLog.init(syntropyConfig);\n    console.log('\u2705 SyntropyLog initialized successfully!');\n  } catch (error) {\n    console.error('\u274c SyntropyLog initialization failed:', error);\n    throw error;\n  }\n}\n\nexport async function gracefulShutdown(): Promise<void> {\n  console.log('\ud83d\udd04 Shutting down SyntropyLog gracefully...');\n  \n  try {\n    // \u26a0\ufe0f CRITICAL: This flushes all pending logs before shutdown\n    await syntropyLog.shutdown();\n    console.log('\u2705 SyntropyLog shutdown completed');\n  } catch (error) {\n    console.error('\u274c Error during shutdown:', error);\n  }\n}\n\n// Signal handlers for graceful shutdown\nprocess.on('SIGINT', async () => {\n  console.log('\\n\ud83d\uded1 Received SIGINT, shutting down gracefully...');\n  await gracefulShutdown();\n  process.exit(0);\n});\n\nprocess.on('SIGTERM', async () => {\n  console.log('\\n\ud83d\uded1 Received SIGTERM, shutting down gracefully...');\n  await gracefulShutdown();\n  process.exit(0);\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-api-functions",children:"\ud83c\udfaf API Functions"}),"\n",(0,r.jsx)(n.h3,{id:"initializesyntropylog-promisevoid",children:(0,r.jsx)(n.code,{children:"initializeSyntropyLog(): Promise<void>"})}),"\n",(0,r.jsx)(n.p,{children:"Initializes SyntropyLog with the provided configuration."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"})," None"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," Promise that resolves when initialization is complete"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Throws:"})," Error if initialization fails"]}),"\n",(0,r.jsx)(n.h3,{id:"gracefulshutdown-promisevoid",children:(0,r.jsx)(n.code,{children:"gracefulShutdown(): Promise<void>"})}),"\n",(0,r.jsx)(n.p,{children:"Performs graceful shutdown of SyntropyLog, flushing all pending logs."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"})," None"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," Promise that resolves when shutdown is complete"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Throws:"})," Error if shutdown fails (but doesn't re-throw)"]}),"\n",(0,r.jsx)(n.h2,{id:"-usage-in-your-application",children:"\ud83d\ude80 Usage in Your Application"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { initializeSyntropyLog } from './boilerplate';\n\nasync function main() {\n  // Initialize SyntropyLog with your configuration\n  await initializeSyntropyLog();\n  \n  // Your application logic here\n  const logger = syntropyLog.getLogger();\n  logger.info('Application started');\n  \n  // The boilerplate handles shutdown automatically\n  // No need to call gracefulShutdown() manually\n}\n\nmain().catch(console.error);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-application-checklist",children:"\u26a0\ufe0f Application Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Before running your application (development or production), ensure:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Boilerplate included"}),": Graceful shutdown handlers are in place"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Signal handling"}),": SIGTERM and SIGINT are handled"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Log flushing"}),": ",(0,r.jsx)(n.code,{children:"syntropyLog.shutdown()"})," is called"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Error handling"}),": Shutdown errors are logged"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Development testing"}),": Test with Ctrl+C to ensure graceful shutdown"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Production readiness"}),": Shutdown completes within Kubernetes grace period"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-testing-the-boilerplate",children:"\ud83d\udd0d Testing the Boilerplate"}),"\n",(0,r.jsx)(n.p,{children:"Test your shutdown handling:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Development testing (Ctrl+C)\n# Simply press Ctrl+C while your app is running\n# You should see: "\ud83d\uded1 Received SIGINT, shutting down gracefully..."\n\n# Production testing (SIGTERM)\nkill -TERM <your-process-pid>\n\n# Manual SIGINT testing\nkill -INT <your-process-pid>\n\n# Verify logs are flushed before exit\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-related-examples",children:"\ud83d\udcda Related Examples"}),"\n",(0,r.jsx)(n.p,{children:"See complete examples with boilerplate in the main repository:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Syntropysoft/SyntropyLog/tree/main/sub-modules/examples/20-basic-kafka-correlation",children:"Kafka Correlation Example"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Syntropysoft/SyntropyLog/tree/main/sub-modules/examples/21-basic-rabbitmq-broker",children:"RabbitMQ Broker Example"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Syntropysoft/SyntropyLog/tree/main/sub-modules/examples/09-http-configuration",children:"HTTP Configuration Example"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Remember"}),": This boilerplate is not optional - it's a ",(0,r.jsx)(n.strong,{children:"requirement for ALL applications"})," (development and production) for reliable, observable applications."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>s});var o=i(6540);const r={},t=o.createContext(r);function l(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);